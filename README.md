## 58二手车网页分析
#### 反爬方式
- 字体加密：   
价格信息采用动态字体加密，字体文件用script内嵌在HTML文件内。   
=> document.write("\<style>@font-face{font-family:'...';src:url('...base64,AAEAAAAO...'\</style>")   
- 动态字体数据：   
不同页面内嵌了不同的字体base64数据，每次刷新网页中的价格信息由不同的‘&#x’转义序列来映射显示字体。
- 相同的映射顺序：   
本来价格信息字体较少（0-9），而且字体的GlyphOrder信息与数字0-9的映射顺序没有变，这降低了反反爬的难度，每次获取页面可以直接构建编码到字体的映射。

#### 代码细节
- TTFont重写：   
TTFont在获取字体信息的时候是通过读取文件来实现的，在能获取动态字体字节串数据情况下重复读写文件着实令人不爽；
这里用继承重写init的方式实现直接读取字节串数据。
- Unicode转hex:   
在网页提取中使用xpath来获取价格编码，发现获取到的‘&#x转义序列’已经被转换为文字符，修改encoding参数无果后（或许是用法没对），无奈选择自己还原转义序列。   
路径：Unicode => ascII => hex
 

